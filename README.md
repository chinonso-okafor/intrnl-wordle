# Optimizer Wordle

A full-stack internal Wordle game for teams with leaderboards, scoring, and admin features.

## Tech Stack

- **Frontend**: Next.js 14 (App Router), React, TypeScript, Tailwind CSS
- **Backend**: Next.js API Routes, Prisma ORM
- **Database**: PostgreSQL
- **Authentication**: NextAuth.js v4
- **UI Components**: Shadcn UI
- **Animations**: Framer Motion
- **Charts**: Recharts

## Getting Started

### Prerequisites

- Node.js 18+ 
- PostgreSQL (required for production, recommended for local dev)
- npm or yarn

**Note**: The Prisma schema is configured for PostgreSQL. For local development with SQLite, change `provider = "postgresql"` to `provider = "sqlite"` in `prisma/schema.prisma` and use a SQLite connection string for `DATABASE_URL`.

### Installation

1. Install dependencies:
```bash
npm install
```

2. Set up environment variables:
```bash
cp .env.example .env
```

Edit `.env` with your configuration:
- `DATABASE_URL` - PostgreSQL connection string
- `NEXTAUTH_SECRET` - Random secret for NextAuth
- `NEXTAUTH_URL` - Your app URL (http://localhost:3000 for dev)

3. Set up the database:
```bash
npx prisma db push
npx prisma db seed
```

4. Run the development server:
```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

## Admin Setup

After seeding the database, you can log in with:
- Email: `admin@example.com`
- Password: `admin123`

**Important**: Change the admin password immediately after first login!

## Features

- Daily Wordle puzzles
- Scoring system with streak bonuses
- Personal stats dashboard
- Multiple leaderboards (weekly, monthly, quarterly, yearly, all-time)
- Share results with emoji grid
- Admin panel for word management
- User management

## Deployment

### Deploying to Render

This app can be deployed to Render using the provided `render.yaml` configuration file.

#### Quick Deploy

1. **Push your code to GitHub** (if not already done)

2. **Connect to Render**:
   - Go to [Render Dashboard](https://dashboard.render.com)
   - Click "New +" → "Blueprint"
   - Connect your GitHub repository
   - Render will automatically detect the `render.yaml` file

3. **Configure Environment Variables**:
   - `NEXTAUTH_URL` - Set to your Render app URL (e.g., `https://your-app.onrender.com`)
   - `DATABASE_URL` - Automatically set from the PostgreSQL database service
   - `NEXTAUTH_SECRET` - Automatically generated by Render

4. **Deploy**:
   - Render will create both the web service and PostgreSQL database
   - After the first deployment, run migrations and seed:
     ```bash
     # Via Render Shell or SSH
     npx prisma migrate deploy
     npx prisma db seed
     ```

#### Manual Setup (Alternative)

If you prefer to set up services manually:

1. **Create PostgreSQL Database**:
   - New → PostgreSQL
   - Name: `optimizer-wordle-db`
   - Copy the Internal Database URL

2. **Create Web Service**:
   - New → Web Service
   - Connect your repository
   - Settings:
     - **Build Command**: `npm install && npx prisma generate && npm run build`
     - **Start Command**: `npm start`
     - **Environment Variables**:
       - `DATABASE_URL`: (from PostgreSQL service)
       - `NEXTAUTH_SECRET`: Generate a random secret
       - `NEXTAUTH_URL`: Your Render app URL
       - `NODE_ENV`: `production`

3. **Run Database Migrations**:
   After first deployment, connect to your web service shell and run:
   ```bash
   npx prisma migrate deploy
   npx prisma db seed
   ```

#### Important Notes

- **Database**: The app uses PostgreSQL in production. Make sure your `DATABASE_URL` points to a PostgreSQL database (not SQLite).
- **Prisma**: The build command includes `npx prisma generate` to ensure Prisma Client is generated during build.
- **Migrations**: Run `prisma migrate deploy` (not `prisma migrate dev`) in production.
- **Seeding**: Only seed the database once after initial deployment.

### Deploying to Vercel

This app can also be deployed to Vercel:

1. Push your code to GitHub
2. Import the repository in Vercel
3. Configure environment variables:
   - `DATABASE_URL` - PostgreSQL connection string
   - `NEXTAUTH_SECRET` - Random secret
   - `NEXTAUTH_URL` - Your Vercel app URL
4. Deploy and run migrations via Vercel CLI or dashboard

## Project Structure

```
/app              - Next.js App Router pages
/components       - React components
/lib              - Utilities and helpers
/prisma           - Database schema and migrations
/public           - Static assets
```
